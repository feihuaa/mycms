{% extends 'base.html' %}


{% block title %} 查看所有用户 {% endblock %}
{% block content %}
<div class="container">
    <div class="page-header">
        <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                <li data-target="#carousel-example-generic" data-slide-to="2"></li>
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <img src="/static/blog/img/1.jpg" alt="...">
                    <div class="carousel-caption">
                        ...
                    </div>
                </div>
                <div class="item">
                    <img src="/static/blog/img/2.jpg" alt="...">
                    <div class="carousel-caption">
                        ...
                    </div>
                </div>
                <div class="item">
                    <img src="/static/blog/img/3.jpg" alt="...">
                    <div class="carousel-caption">
                        ...
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row">

        <div class="col-md-3">
            <div class="panel panel-primary">
                <div class="panel-heading">博主栏目</div>
                <ul class="list-group">
                    <li class="list-group-item" style="text-align: center">
                        {% if request.session.loginUser %}
                        <img src="/static/uepload/{{ request.session.loginUser.header }}" width="100" height="100" alt="..." class="img-circle">
                        {% else %}
                        <!--<img style="height:100px, width:100px" src="/static/img/img/headers/4.jpg" alt="">-->
                        <h4>hello，&nbsp;<a href="{% url 'blog:login' %}">欢迎登录</a></h4>
                        {% endif %}
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:index' %}">返回首页</a>
                    </li>
                    <li class="list-group-item">
                        {% if request.session.loginUser %}
                        <a href="{% url 'blog:list_user' %}">查看所有用户</a>
                        {% else %}
                        <a href="{% url 'blog:login' %}">查看所有用户</a>
                        {% endif %}
                    </li>
                    <li class="list-group-item">
                        {% if request.session.loginUser %}
                        <a href="{% url 'blog:add_article' %}">发表文章</a>
                        {% else %}
                        <a href="{% url 'blog:login' %}">发表文章</a>
                        {% endif %}
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:reg' %}">注册</a>
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:login' %}">切换用户</a>
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:show_all_article' %}">展示当前用户所有文章</a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="col-md-9">
            <div class="panel panel-primary">
              <div class="panel-heading">所有用户</div>

              <div class="panel-body">

                  <table class="table table-bordered table-hover table-striped">
                      <thead>
                        <tr>
                            <td>用户标示</td>
                            <td>用户名称</td>
                            <td>用户昵称</td>
                            <td>用户年龄</td>
                            <td>操作</td>
                        </tr>
                      </thead>
                      <tbody>
                        {% for user in users %}
                            <tr>
                                <td>{{ forloop.counter0 }}</td>
                                <td>{{ user.username }}</td>
                                <td><a href="/blog/show/{{ user.id }}">{{ user.nickname }}</a></td>
                                <td>{{ user.age }}</td>
                                <td>
                                    <!--<a href="/blog/{{user.id}}/update/">修改</a>-->
                                    <!--<a onclick="window.confirm('您确定要删除这个用户吗？')" href="/blog/delete_user/{{user.id}}/">删除</a>-->
                                    <!--<a href="/blog/{{user.id}}/update/" class="btn btn-xs btn-default btn-primary">修改</a>-->
                                    <!--<a onclick="window.confirm('您确定要删除这篇文章吗？')" href="/blog/delete_user/{{user.id}}/" class="btn btn-xs btn-default">删除</a>-->
                                    {% if user.id == request.session.loginUser.id %}
                                    <a href="/blog/{{user.id}}/update/" class="btn btn-xs btn-default btn-primary">修改</a>
                                    <a onclick="window.confirm('您确定要删除这篇文章吗？')" href="/blog/delete_user/{{user.id}}/" class="btn btn-xs btn-default">删除</a>
                                    {% else %}
                                    非当前用户禁止修改
                                    {% endif %}
                                </td>
                            </tr>
                        {% empty %}
                         <tr>
                             <td colspan="5">对不起，当前没有用户</td>
                         </tr>

                         {% endfor %}
                      </tbody>
                  </table>
              </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}