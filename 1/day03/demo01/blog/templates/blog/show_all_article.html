{% extends 'base.html' %}


{% block title %} 展示博主所有文章 {% endblock %}
{% block content %}
<div class="container">
    <div class="page-header">
        <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                <li data-target="#carousel-example-generic" data-slide-to="2"></li>
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <img src="/static/blog/img/1.jpg" alt="...">
                    <div class="carousel-caption">
                        ...
                    </div>
                </div>
                <div class="item">
                    <img src="/static/blog/img/2.jpg" alt="...">
                    <div class="carousel-caption">
                        ...
                    </div>
                </div>
                <div class="item">
                    <img src="/static/blog/img/3.jpg" alt="...">
                    <div class="carousel-caption">
                        ...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-3">
            <div class="panel panel-primary">
                <div class="panel-heading">博主栏目</div>
                <ul class="list-group">
                    <li class="list-group-item" style="text-align: center">
                        {% if request.session.loginUser %}
                        <img src="/static/uepload/{{ request.session.loginUser.header }}" width="100" height="100" alt="..." class="img-circle">
                        {% else %}
                        <!--<img style="height:100px, width:100px" src="/static/img/img/headers/4.jpg" alt="">-->
                        <h4>hello，&nbsp;<a href="{% url 'blog:login' %}">欢迎登录</a></h4>
                        {% endif %}
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:index' %}">返回首页</a>
                    </li>
                    <li class="list-group-item">
                        {% if request.session.loginUser %}
                        <a href="{% url 'blog:list_user' %}">查看所有用户</a>
                        {% else %}
                        <a href="{% url 'blog:login' %}">查看所有用户</a>
                        {% endif %}
                    </li>
                    <li class="list-group-item">
                        {% if request.session.loginUser %}
                        <a href="{% url 'blog:add_article' %}">发表文章</a>
                        {% else %}
                        <a href="{% url 'blog:login' %}">发表文章</a>
                        {% endif %}
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:reg' %}">注册</a>
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:login' %}">切换用户</a>
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:show_all_article' %}">展示当前用户所有文章</a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="col-md-9">
            <div class="panel panel-primary">
                <div class="panel-heading">文章列表</div>

                <div class="panel-body">
                    {% csrf_token %}
                    <table class="table table-bordered table-hover table-striped">

                        <thead>
                            <tr>
                                <td>文章标题</td>
                                <td>文章作者</td>
                                <td>发布时间</td>
                                <td>文章内容</td>
                                <td>操作</td>
                            </tr>
                        </thead>
                        <tbody>
                        {% for article in articles %}
                            <tr>
                                <!--<td>{{ article.title |truncatechars:20}}</td>-->
                                <td><a href="{% url 'blog:show_article' article.id %}">{{ article.title |truncatechars:10 }}</a></td>
                                <td>{{ article.author.nickname }}</td>
                                <td>{{ article.publishTime }}</td>
                                <td>{{ article.content |truncatechars:20}}
                                <td>
                                    {# {% if articel.author.id == request.session.loginUser.id %} #}
                                    <a href="/blog/{{article.id}}/update_article/" class="btn btn-xs btn-default btn-primary">修改文章</a>
                                    <a onclick="window.confirm('您确定要删除这篇文章吗？')" href="/blog/{{article.id}}/delete_article/" class="btn btn-xs btn-default">删除文章</a>
                                    {# {% else %} #}
                                    <!--非文章作者不能删除文章-->
                                    {# {% endif %} #}
                                </td>
                            </tr>
                          {% empty %}
                          <h2>很抱歉，<a href="{% url 'blog:add_article' %}">请先去发表文章</a></h2>
                          {% endfor %}
                        </tbody>
                  </table>
              </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}