{% extends 'base.html' %}


{% block content %}

<script src="/static/js/lib/jquery2.2.4/jquery-2.2.4.min.js"></script>

<!------------------------------广告位样式---------------------------------------->
<div class="container">
    <div class="row">
        {% csrf_token %}
        <div class="col-md-8">
            <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                </ol>

                <!-- Wrapper for slides -->
                <div class="carousel-inner" role="listbox">
                    <div class="item active">
                        <img src="/static/blog/img/1.jpg" alt="...">
                        <div class="carousel-caption">
                            ...
                        </div>
                    </div>
                    <div class="item">
                        <img src="/static/blog/img/2.jpg" alt="...">
                        <div class="carousel-caption">
                            ...
                        </div>
                    </div>
                    <div class="item">
                        <img src="/static/blog/img/3.jpg" alt="...">
                        <div class="carousel-caption">
                            ...
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="panel panel-default text-tuijie">
                <div class="panel-heading">博客推介</div>
                <p> 曲曲池边路，春来少人行<br> 含水芙蓉叶，春去气犹清<br>
                    夕岚分彩翠，高树藏莺声<br> 乍向风中看，花落更分明<br>
                    徘徊觉露冷，清宵月影横<br> 泠泠砭肌发，疑是晓寒生<br>
                    一望可相见，一步如重城<br> 所爱隔山海，山海不可平<br>
                </p>
            </div>
        </div>
    </div>
</div>
<!------------------------------广告位样式---------------------------------------->

<!------------------------------页头样式---------------------------------------->
<div class="container">
    <div class="row">
        <!----------------------------展示热门文章----------------------------->
        <div class="col-md-8">
            <div class="panel panel-default remenwenzhang">
                <div class="panel-heading">热门文章</div>
                <ul class="list-group">
                    {% for article in page.object_list %}
                    <li class="list-group-item ">
                        <a href="{% url 'blog:show_article' article.id %}"><i class="label label-danger">原创</i>{{ article.title |truncatechars:40 }}</a>
                        <span class="badge">324</span>
                        <!--<a class="badge" href="#">{{ article.author.nickname }}</a>-->
                        <a class="badge" href="{% url 'blog:show_all_article' %}">{{ article.author.nickname }}</a>
                        <!--<a class="badge" href="/blog/blog/show_all_srticle/">{{ article.author.nickname }}</a>-->
                    </li>
                    {% empty %}
                    <h2>很抱歉，请先去发表文章</h2>
                    {% endfor %}
                </ul>
                <nav aria-label="Page navigation" class="col-md-offset-3 col-md-9">
                    <ul class="pagination">
                        <li>
                            <a href="/blog/index/?pageNow=1">首页</a>
                        </li>
                        {% if page.has_previous %}
                        <li>
                            <a href="/blog/index?pageNow={{page.previous_page_number}}" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        {% endif %}

                        {% for p in page.paginator.page_range %}
                            <li><a href="/blog/index/?pageNow={{p}}">{{p}}</a></li>
                        {% endfor %}

                        {% if page.has_next %}
                        <li>
                            <a href="/blog/index?pageNow={{page.next_page_number}}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                        {% endif %}
                        <li>
                            <a href="/blog/index/?pageNow={{page.paginator.num_pages}}">尾页</a>
                        </li>

                    </ul>
                </nav>
                <!--</div>-->
            </div>
        </div>

        <!---------------------------展示博主信息--------------------------------------->
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading">博主栏目</div>
                <ul class="list-group">
                    <li class="list-group-item" style="text-align: center">
                        {% if request.session.loginUser %}
                        <img src="/static/uepload/{{ request.session.loginUser.header }}" width="100" height="100" alt="..." class="img-circle">
                        {% else %}
                        <!--<img style="height:100px, width:100px" src="/static/img/img/headers/4.jpg" alt="">-->
                        <h4>hello，&nbsp;<a href="{% url 'blog:login' %}">欢迎登录</a></h4>
                        {% endif %}
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:index' %}">返回首页</a>
                    </li>
                    <li class="list-group-item">
                        {% if request.session.loginUser %}
                        <a href="{% url 'blog:list_user' %}">查看所有用户</a>
                        {% else %}
                        <a href="{% url 'blog:login' %}">查看所有用户</a>
                        {% endif %}
                    </li>
                    <li class="list-group-item">
                        {% if request.session.loginUser %}
                        <a href="{% url 'blog:add_article' %}">发表文章</a>
                        {% else %}
                        <a href="{% url 'blog:login' %}">发表文章</a>
                        {% endif %}
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:reg' %}">注册</a>
                    </li>
                    <li class="list-group-item">
                        <a href="{% url 'blog:login' %}">切换用户</a>
                    </li>
                    <li class="list-group-item">
                        {% if request.session.loginUser %}
                        <a href="{% url 'blog:show_all_article' %}">展示当前用户所有文章</a>
                        {% else %}
                        <a href="{% url 'blog:login' %}">发表文章</a>
                        {% endif %}
                    </li>
                </ul>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">推荐大牛</div>
                <ul class="list-group">

                    <!--怎么从数据库中随机出几个人-->
                    {% for user in users %}
                    <li class="list-group-item">
                        <div class="media">
                            <div class="media-left">
                                <a href="#">
                                    <!--<img class="media-object img-circle img-touxiang" src="/static/blog/img/headers/1.jpg" alt="...">-->
                                    <img class="media-object img-circle img-touxiang" src="/static/uepload/{{ user.header }}" alt="...">
                                </a>
                            </div>
                            <div class="media-body">
                                <a href="#" class="text-zuozhe">
                                    <h4 class="media-heading">{{ user.nickname }}</h4>
                                    <p>写了178668字&nbsp;&nbsp;456喜欢</p>
                                </a>
                            </div>
                        </div>
                    </li>
                    {% empty %}
                    <h2>很抱歉，当前没有用户推荐</h2>
                    {% endfor %}

                    <!--<li class="list-group-item">-->
                        <!--<div class="media">-->
                            <!--<div class="media-left">-->
                                <!--<a href="#">-->
                                    <!--<img class="media-object img-circle img-touxiang" src="/static/blog/img/headers/1.jpg" alt="...">-->
                                <!--</a>-->
                            <!--</div>-->
                            <!--<div class="media-body">-->
                                <!--<a href="#" class="text-zuozhe">-->
                                    <!--<h4 class="media-heading">行踪如风</h4>-->
                                    <!--<p>写了178668字&nbsp;&nbsp;456喜欢</p>-->
                                <!--</a>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</li>-->
                    <!--<li class="list-group-item">-->
                        <!--<div class="media">-->
                            <!--<div class="media-left">-->
                                <!--<a href="#">-->
                                    <!--<img class="media-object img-circle img-touxiang" src="/static/blog/img/headers/3.jpg" alt="...">-->
                                <!--</a>-->
                            <!--</div>-->
                            <!--<div class="media-body">-->
                                <!--<a href="#" class="text-zuozhe">-->
                                    <!--<h4 class="media-heading">行踪如风</h4>-->
                                    <!--<p>写了1748678字&nbsp;&nbsp;4786喜欢</p>-->
                                <!--</a>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</li>-->
                    <!--<li class="list-group-item">-->
                        <!--<div class="media">-->
                            <!--<div class="media-left">-->
                                <!--<a href="#">-->
                                    <!--<img class="media-object img-circle img-touxiang" src="/static/blog/img/headers/4.jpg" alt="...">-->
                                <!--</a>-->
                            <!--</div>-->
                            <!--<div class="media-body">-->
                                <!--<a href="#" class="text-zuozhe">-->
                                    <!--<h4 class="media-heading">行踪如风</h4>-->
                                    <!--<p>写了17868字&nbsp;&nbsp;46喜欢</p>-->
                                <!--</a>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</li>-->
                    <!--<li class="list-group-item">-->
                        <!--<div class="media">-->
                            <!--<div class="media-left">-->
                                <!--<a href="#">-->
                                    <!--<img class="media-object img-circle img-touxiang" src="/static/blog/img/headers/5.jpg" alt="...">-->
                                <!--</a>-->
                            <!--</div>-->
                            <!--<div class="media-body">-->
                                <!--<a href="#" class="text-zuozhe">-->
                                    <!--<h4 class="media-heading">行踪如风</h4>-->
                                    <!--<p>写了1567字&nbsp;&nbsp;6喜欢</p>-->
                                <!--</a>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</li>-->
                    <!--<li class="list-group-item">-->
                        <!--<div class="media">-->
                            <!--<div class="media-left">-->
                                <!--<a href="#">-->
                                    <!--<img class="media-object img-circle img-touxiang" src="/static/blog/img/headers/6.jpg" alt="...">-->
                                <!--</a>-->
                            <!--</div>-->
                            <!--<div class="media-body">-->
                                <!--<a href="#" class="text-zuozhe">-->
                                    <!--<h4 class="media-heading">行踪如风</h4>-->
                                    <!--<p>写了15678字&nbsp;&nbsp;456喜欢</p>-->
                                <!--</a>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</li>-->
                </ul>
            </div>
        </div>
    </div>
    <!--<button onclick="sendajax()">发送ajax</button>-->
</div>



<script>
//    function sendajax() {
//        //获取对象
//        var xhr = new XMLHttpRequest();
//        //open
//        xhr.open("POST", "/blog/ajax_hello/", true)
//        //监听事件
//        xhr.onreadystatechange = function () {
//            // 接受服务器返回的参数
//            if (xhr.readyState == 4 && xhr.status == 200) {
//                console.log(xhr.responseText)
//            }
//        }
//           xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
//       //send
//        xhr.send("id=1&username=lqm");
//    }

    function sendajax() {
        $.ajax({
            url:"/blog/ajax_hello/",
            method:"POST",
            data:{"id":14, "name":"lqm", "csrfmiddlewaretoken": '{{ csrf_token }}' },
            dataType:"json",
            success:function(data) {
                console.log(data)
            }
        })
    }
</script>

{% endblock %}